<!--<script
  src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"
  integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE"
  crossorigin="anonymous"
></script>
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js"
  integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ"
  crossorigin="anonymous"
></script>
<link rel="stylesheet" href="companies.component.css" />
<div class="border border-3 border-primary rounded" style="margin: 80px">
  <h1
    style="font-family: Verdana, Geneva, Tahoma, sans-serif; text-align: center"
  >
    COMPANIES
  </h1>
  <div class="table-responsive" style="margin: 80px">
    <div class="container" style="margin: 40px;">
      <div class="mx-auto p-3" style="width: 25rem;">
        <div class="input-group text-center" style="width: 30rem;">
          <input
            class="form-control border border-primary"
            id="usersfilter"
            placeholder="Name..."
            [(ngModel)]="searchTermByName"
          />
          <button
            class="btn btn-primary"
            type="submit"
            (click)="filterCompaniesByName(searchTermByName)"
          >
            Search
          </button>
        </div>
      </div>
      <div class="mx-auto p-3" style="width: 25rem;">
        <div class="input-group text-center" style="width: 30rem;">
          <input
            class="form-control border border-primary"
            id="usersfilter"
            placeholder="Email... "
            [(ngModel)]="searchTermByEmail"
          />
          <button
            class="btn btn-primary"
            type="submit"
            (click)="filterCompaniesByEmail(searchTermByEmail)"
          >
            Search
          </button>
        </div>
      </div>
      <div class="mx-auto p-3" style="width: 25rem;">
        <div class="input-group text-center" style="width: 30rem;">
          <input
            class="form-control border border-primary"
            id="usersfilter"
            placeholder="Vat..."
            [(ngModel)]="searchTermByVat"
          />
          <button
            class="btn btn-primary"
            type="submit"
            (click)="filterCompaniesByVat(searchTermByVat)"
          >
            Search
          </button>
        </div>
      </div>
      <div class="mx-auto p-3" style="width: 25rem;">
        <div class="input-group text-center" style="width: 30rem;">
          <input
            class="form-control border border-primary"
            id="usersfilter"
            placeholder="Phone..."
            [(ngModel)]="searchTermByPhone"
          />
          <button
            class="btn btn-primary"
            type="submit"
            (click)="filterCompaniesByPhone(searchTermByPhone)"
          >
            Search
          </button>
        </div>
      </div>
      <div class="mx-auto p-3" style="width: 25rem;">
        <div class="input-group text-center" style="width: 30rem;">
          <input
            class="form-control border border-primary"
            id="usersfilter"
            placeholder="Country..."
            [(ngModel)]="searchTermByCountry"
          />
          <button
            class="btn btn-primary"
            type="submit"
            (click)="filterCompaniesByCountry(searchTermByCountry)"
          >
            Search
          </button>
        </div>
      </div>
      <div class="mx-auto p-3" style="width: 25rem;">
        <div class="input-group text-center" style="width: 30rem;">
          <input
            class="form-control border border-primary"
            id="usersfilter"
            placeholder="Addresses..."
            [(ngModel)]="searchTermByAddresses"
          />
          <button
            class="btn btn-primary"
            type="submit"
            (click)="filterCompaniesByAddresses(searchTermByAddresses)"
          >
            Search
          </button>
        </div>
      </div>
      <div
        class="mx-auto p-3 text-end" style="width: 25rem;"
        style="width: 39rem;"
      >
        <button
          class="btn btn-primary btn-lg"
          type="submit"
          (click)="resetCompaniesFilters()"
        >
          Reset
        </button>
      </div>
    </div>
    <table class="table table-sm">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Name</th>
          <th scope="col">Email</th>
          <th scope="col">Vat</th>
          <th scope="col">Phone</th>
          <th scope="col">Country</th>
          <th scope="col">Addresses</th>
        </tr>
      </thead>
      <tbody class="table-group-divider" style="border-top-color: #0d6efd">
        <tr *ngFor="let Companies of CompaniesDisplay.data">
          <th scope="row">{{ Companies.id }}</th>
          <td>{{ Companies.name }}</td>
          <td>{{ Companies.email }}</td>
          <td>{{ Companies.vat }}</td>
          <td>{{ Companies.phone }}</td>
          <td>{{ Companies.country }}</td>
          <td>{{ Companies.addresses[0].street }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div> -->

<link rel="stylesheet" href="companies.component.css" />

<div class="container">
  <h1>Companies</h1>
  <mat-accordion>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Filters Section
        </mat-panel-title>
      </mat-expansion-panel-header>
      <form class="example-form">
        <mat-form-field>
          <mat-label>Name</mat-label>
          <input matInput  [(ngModel)]="searchTermByName" name="searchTerm">
        </mat-form-field>
        <mat-form-field>
          <mat-label>Email</mat-label>
          <input matInput [(ngModel)]="searchTermByEmail" name="searchTerm">
        </mat-form-field>
        <mat-form-field>
          <mat-label>Phone</mat-label>
          <input matInput [(ngModel)]="searchTermByPhone" name="searchTerm">
        </mat-form-field>
        <mat-form-field>
          <mat-label>Vat</mat-label>
          <input matInput [(ngModel)]="searchTermByVat" name="searchTerm">
        </mat-form-field>
        <mat-form-field>
          <mat-label>Country</mat-label>
          <input matInput [(ngModel)]="searchTermByCountry" name="searchTerm">
        </mat-form-field>
        <mat-form-field>
          <mat-label>Addresses</mat-label>
          <input matInput [(ngModel)]="searchTermByAddresses" name="searchTerm">
        </mat-form-field>
      </form>
      <button mat-raised-button color="primary" (click)="filterCompanies()">Search</button>
      <button mat-raised-button color="warn">Reset</button>
    </mat-expansion-panel>
  </mat-accordion>
</div>

<table mat-table [dataSource]="CompaniesDisplay.data" class="mat-elevation-z8">

  <!-- Position Column -->
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef> # </th>
    <td mat-cell *matCellDef="let Companies;">{{Companies.id}}</td>
  </ng-container>
   
  <!-- Name Column -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef> Name </th>
    <td mat-cell *matCellDef="let Companies;">{{Companies.name}}</td>
  </ng-container>

  <!-- Email Column -->
  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef> Email </th>
    <td mat-cell *matCellDef="let Companies;">{{Companies.email}}</td>
  </ng-container>

  <!-- Vat Column -->
  <ng-container matColumnDef="vat">
    <th mat-header-cell *matHeaderCellDef> Vat </th>
    <td mat-cell *matCellDef="let Companies;">{{Companies.vat}}</td>
  </ng-container>

  <!-- Phone Column -->
  <ng-container matColumnDef="phone">
    <th mat-header-cell *matHeaderCellDef> Phone </th>
    <td mat-cell *matCellDef="let Companies;">{{Companies.phone}}</td>
  </ng-container>

  <!-- Country Column -->
  <ng-container matColumnDef="country">
    <th mat-header-cell *matHeaderCellDef> Country </th>
    <td mat-cell *matCellDef="let Companies;">{{Companies.country}}</td>
  </ng-container>

  <!-- Addresses Column -->
  <ng-container matColumnDef="addresses">
    <th mat-header-cell *matHeaderCellDef> Addresses </th>
    <td mat-cell *matCellDef="let Companies;">{{Companies.addresses[0].street}}</td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="openDialog()"></tr> <!--qua va messo il click per aprire la dialog-->
</table>


